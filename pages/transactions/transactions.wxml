<!--pages/transactions/transactions.wxml-->
<view class="container">
  <!-- äº¤æ˜“ç»Ÿè®¡å¡ç‰‡ -->
  <view class="gradient-header">
    <view class="stat-row">
      <view class="stat-item">
        <view class="stat-icon text-green">ğŸ“ˆ</view>
        <view class="stat-label">ä¹°å…¥æ€»é¢</view>
        <view class="stat-value">Â¥{{totalBuyAmount}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-icon text-red">ğŸ“‰</view>
        <view class="stat-label">å–å‡ºæ€»é¢</view>
        <view class="stat-value">Â¥{{totalSellAmount}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-icon">ğŸ’°</view>
        <view class="stat-label">äº¤æ˜“æ¬¡æ•°</view>
        <view class="stat-value">{{transactions.length}}</view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="card">
    <view class="card-body">
      <view class="action-buttons">
        <button class="btn btn-primary" bindtap="onAddTransaction">
          + æ·»åŠ äº¤æ˜“
        </button>
        <button class="btn btn-secondary" bindtap="onImportData">
          ğŸ“¥ å¯¼å…¥æ•°æ®
        </button>
      </view>
    </view>
  </view>

  <!-- äº¤æ˜“è®°å½•åˆ—è¡¨ -->
  <view wx:if="{{transactions.length === 0}}" class="empty-state">
    <view class="icon">ğŸ“</view>
    <view class="text">æš‚æ— äº¤æ˜“è®°å½•</view>
  </view>

  <view wx:else>
    <view class="section-title">äº¤æ˜“è®°å½• ({{transactions.length}})</view>
    
    <view class="transaction-list">
      <view 
        class="list-item" 
        wx:for="{{transactions}}" 
        wx:key="{{item.id}}"
        bindtap="onTransactionTap"
        data-transaction="{{item}}"
      >
        <view class="avatar {{item.type === 'buy' ? 'avatar-buy' : 'avatar-sell'}}">
          <text class="icon">{{item.type === 'buy' ? 'ä¹°' : 'å–'}}</text>
        </view>
        <view class="content">
          <view class="title">{{item.stockCode}} {{item.stockName}}</view>
          <view class="subtitle">
            <text class="tag {{item.type === 'buy' ? 'tag-buy' : 'tag-sell'}}">
              {{item.type === 'buy' ? 'ä¹°å…¥' : 'å–å‡º'}}
            </text>
            <text>{{item.userName}}</text>
          </view>
          <view class="desc">
            æ•°é‡: {{item.quantity}}è‚¡ | ä»·æ ¼: Â¥{{item.price}} | {{item.transactionDate}}
          </view>
        </view>
        <view class="right">
          <view class="amount {{item.type === 'buy' ? 'text-red' : 'text-green'}}">
            Â¥{{item.netAmount}}
          </view>
          <view class="change" bindtap="onEditTransaction" data-transaction="{{item}}">
            ç¼–è¾‘
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
