<!--pages/profits/profits.wxml-->
<view class="container">
  <!-- æ€»ä½“æ”¶ç›Šæ¦‚è§ˆ -->
  <view class="gradient-header">
    <view class="title">æ”¶ç›Šåˆ†æ</view>
    <view class="stat-row">
      <view class="stat-item">
        <view class="stat-label">æ€»æŠ•å…¥</view>
        <view class="stat-value">Â¥{{totalInvestment}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">æ€»æ”¶ç›Š</view>
        <view class="stat-value {{totalProfit >= 0 ? 'text-green' : 'text-red'}}">
          {{totalProfit >= 0 ? '+' : ''}}Â¥{{totalProfit}}
        </view>
      </view>
      <view class="stat-item">
        <view class="stat-label">æ”¶ç›Šç‡</view>
        <view class="stat-value {{profitRate >= 0 ? 'text-green' : 'text-red'}}">
          {{profitRate >= 0 ? '+' : ''}}{{profitRate}}%
        </view>
      </view>
    </view>
  </view>

  <!-- ç”¨æˆ·æ”¶ç›Š -->
  <view wx:if="{{userProfits.length > 0}}" class="card">
    <view class="card-header">ç”¨æˆ·æ”¶ç›Šæ’è¡Œ</view>
    <view class="card-body">
      <view 
        class="profit-item" 
        wx:for="{{userProfits}}" 
        wx:key="{{item.userId}}"
      >
        <view class="rank">{{index + 1}}</view>
        <view class="info">
          <view class="name">{{item.userName}}</view>
          <view class="desc">{{item.transactionCount}} ç¬”äº¤æ˜“</view>
        </view>
        <view class="amount">
          <view class="profit {{item.realizedPL >= 0 ? 'text-green' : 'text-red'}}">
            {{item.realizedPL >= 0 ? '+' : ''}}Â¥{{item.realizedPL}}
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è‚¡ç¥¨æ”¶ç›Š -->
  <view wx:if="{{stockProfits.length > 0}}" class="card">
    <view class="card-header">è‚¡ç¥¨æ”¶ç›Šæƒ…å†µ</view>
    <view class="card-body">
      <view 
        class="profit-item" 
        wx:for="{{stockProfits}}" 
        wx:key="{{item.stockCode}}"
      >
        <view class="rank">{{item.stockCode}}</view>
        <view class="info">
          <view class="name">{{item.stockName}}</view>
          <view class="desc">{{item.transactionCount}} ç¬”äº¤æ˜“</view>
        </view>
        <view class="amount">
          <view class="profit {{item.realizedPL >= 0 ? 'text-green' : 'text-red'}}">
            {{item.realizedPL >= 0 ? '+' : ''}}Â¥{{item.realizedPL}}
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æœˆåº¦ç»Ÿè®¡ -->
  <view wx:if="{{monthlyStats.length > 0}}" class="card">
    <view class="card-header">æœˆåº¦ç»Ÿè®¡</view>
    <view class="card-body">
      <view 
        class="month-item" 
        wx:for="{{monthlyStats}}" 
        wx:key="{{item.month}}"
      >
        <view class="month">{{item.month}}</view>
        <view class="stats">
          <view class="stat-row">
            <view class="stat">ä¹°å…¥ Â¥{{item.buyAmount}}</view>
            <view class="stat">å–å‡º Â¥{{item.sellAmount}}</view>
          </view>
          <view class="net {{item.netAmount >= 0 ? 'text-green' : 'text-red'}}">
            å‡€é¢: {{item.netAmount >= 0 ? '+' : ''}}Â¥{{item.netAmount}}
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{userProfits.length === 0}}" class="empty-state">
    <view class="icon">ğŸ“Š</view>
    <view class="text">æš‚æ— æ”¶ç›Šæ•°æ®</view>
  </view>
</view>
